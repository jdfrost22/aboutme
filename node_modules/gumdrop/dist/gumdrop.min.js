"use strict";(function(){'use strict';function a(){const a=window.document.querySelector("main");if(a)return a;const b=window.document.querySelector("script"),c=window.document.createElement("main");return b.parentNode.insertBefore(c,b),c}async function b(a,b=void 0){// eslint-disable-next-line
const c=window.eval.bind(window);return window.module={},c("(function (module) {\n      ".concat(a,"\n      ").concat(void 0===b?"":"module.exports = ".concat(b,";"),"\n    })(window.module)")),window.module.exports}async function c(a){const b=await z.get("js-yaml"),c=new b.Type("!file",{kind:"scalar",resolve(a){return null!==a},construct(a){return new o(a,"data","yaml")}}),d=b.Schema.create([c]);return b.safeLoad(a,{schema:d})||{}}async function d(a){return JSON.parse(a)}async function e(a){if("object"==typeof a)for(const b in a){const c=a[b];c instanceof o?a[b]=await f(c):await e(c)}}async function f(a){if(!Object.keys(B).includes(a.type))throw new t("Invalid resource type requested",a);const b=await window.fetch(a.url,{cache:"no-cache"});if(!f.ok)if(404===b.status)throw new r;else if(400===b.status)throw new t;else if(500<=b.status)throw new s;try{const c=await b.text(),{type:d,parse:f}=B[a.type];let g;"data"===d?g=new v(c,f):"document"===d&&(g=new A(c,f));const h=await g.getData();return await e(h),g.resolve()}catch(a){if(a instanceof q)throw a;throw new s("Invalid content",a)}}async function g(a){const b=new o(a.httpErrorCode,"errors","md");try{return await f(b)}catch(b){return a.message}}async function h(a){const b=new o(a.page,"pages","md"),c=window.setTimeout(function(){p.root.innerHTML=p.loader},D);p.root.innerHTML=await C.get(b),window.clearTimeout(c)}async function i(){if(document.querySelector("pre > code")){const a=await z.get("prismjs");a.highlightAll()}}function j(a){const b=document.querySelectorAll("a[href]");for(const c of b){const b=c.getAttribute("href"),d=new n(b),e=d.page===a.page;d.isAbsolute||(c.setAttribute("href",d.getLinkHref(a.page)),c.classList.toggle("active",e))}}function k(){const a=document.querySelector("h1");document.title=a?"".concat(a.textContent," | ").concat(p.title):"".concat(p.title)}function l(a){const b=document.getElementById(a.fragment);null===b?window.scrollTo({top:0}):b.scrollIntoView({block:"start"})}async function m(a){await h(a),await i(),j(a),k()}class n{constructor(a=""){this.url=a;const b=a.match(/^([^#]*)(#!)?\/?([^#]*)(#)?(.*)$/);if(null===b)throw new Error("URL parsing failed");else{const[,a,c,d,e,f]=b;this.site=a,this.page=d||"index",this.fragment=window.encodeURI(window.decodeURI(f)),this.isAnchor=!this.isAbsolute&&!c&&e}}get isAbsolute(){return""!==this.site}getLinkHref(a){return this.isAnchor?"#!/".concat(a,"#").concat(this.fragment):this.url}}class o{constructor(a,b,c){const d=/^(\/)?(.+?)?(?:\.([^./]+))?$/.exec(a);if(null===d)this.file=a,this.type=c;else{const[,a,e,f]=d;this.file=a?e:"".concat(b,"/").concat(e),this.type=f||c}}get url(){return"".concat(this.file,".").concat(this.type)}}const p={root:a(),title:function(){return window.document.title}(),loader:function(){return a().innerHTML}()};class q extends Error{constructor(a,b="Unknown error",c="",d={}){super("<h1>".concat(b,"</h1><strong>").concat(c,"</strong>")),this.httpErrorCode=a,this.details=d}}class r extends q{constructor(a="The page you requested does not exist",b={}){super(404,"404 - Not Found",a,b)}}class s extends q{constructor(a="",b={}){super(500,"500 - Server Error",a,b)}}class t extends q{constructor(a="",b={}){super(300,"300 - Bad Request",a,b)}}class u{constructor(a){this.parse=a}async resolve(){return""}}class v extends u{constructor(a,b){super(b),this.rawData=a}async getData(){return void 0===this.parsedData?(this.parsedData=await this.parse(this.rawData),this.getData()):this.parsedData}async resolve(){return this.getData()}}var w={extramark:"0.3.2","js-yaml":"3.13.1",mustache:"3.1.0",prismjs:"^1.20.0"};const x={extramark:{name:"extramark",version:w.extramark,path:"dist/extramark.min.js",export:"ExtraMark"},mustache:{name:"mustache",version:w.mustache,path:"mustache.min.js",export:"Mustache"},prismjs:{name:"prismjs",version:w.prismjs,path:"prism.min.js",export:"Prism",async callback(a,b,c){await b.get("prismjs-autoloader"),c.plugins.autoloader.languages_path="".concat(b.cdnRoot,"/").concat(a.name,"@").concat(a.version,"/components/")}},"prismjs-autoloader":{name:"prismjs",version:w.prismjs,path:"plugins/autoloader/prism-autoloader.min.js",export:"null"},"js-yaml":{name:"js-yaml",version:w["js-yaml"],path:"dist/js-yaml.min.js",export:"jsyaml"}},y="https://cdn.jsdelivr.net/npm/",z={_imports:{},cdnRoot:y,async get(a){if(a in this._imports)return this._imports[a];if(!(a in x))throw new Error("Unknown dependency ".concat(a,"."));const c=x[a],d="".concat(c.name,"@").concat(c.version,"/").concat(c.path),e=await window.fetch(y+d);if(!e.ok){const b="Could not load dependency ".concat(a," from ").concat(y);if(404===e.status)throw new r(b);else if(400===e.status)throw new t(b);else if(500<=e.status)throw new s(b)}const f=await e.text();// eslint-disable-next-line
return this._imports[a]=await b(f,c.export||void 0),c.callback&&(await c.callback(c,z,this._imports[a])),this._imports[a]}};class A extends u{constructor(a,b){super(b);const e=/^\x2D\x2D\x2D[\t ]*(\r?\n[\s\S]*?\r?\n|\r?\n)\x2D\x2D\x2D[\t ]*\r?\n([\s\S]*)$/.exec(a);if(null===e)this.context=new v("{}",d),this.template=a;else{const[,a,b]=e;this.context=new v(a,c),this.template=b}}async getData(){return this.context.getData()}async resolve(){const a=await z.get("mustache"),b=a.render(this.template,(await this.getData()));return this.parse(b)}}const B={yaml:{type:"data",parse:c},yml:{type:"data",parse:c},json:{type:"data",parse:d},md:{type:"document",parse:async function(a){const b=await z.get("extramark");return b.render(a)}}},C={_resources:{},async get(a){const b=a.url;if(b in this._resources)return this._resources[b];try{// eslint-disable-next-line
this._resources[b]=await f(a)}catch(a){// eslint-disable-next-line
this._resources[b]=await g(a)}return this._resources[b]}},D=500;window.addEventListener("hashchange",async function(a){const b=new n(a.newURL),c=new n(a.oldURL);b.page!==c.page&&(await m(b)),l(b)}),window.addEventListener("load",async function(){const a=new n(window.location.href);await m(a),l(a)})})();
